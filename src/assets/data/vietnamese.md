XCM Ä‘Ã£ Ä‘Æ°á»£c cáº£i tiáº¿n Ä‘Ã¡ng ká»ƒ chá»‰ trong khoáº£ng 2020 tá»›i nay Ä‘Ã£ cÃ³ tá»›i 3 phiÃªn báº£n Ä‘Ã£ Ä‘Æ°á»£c phÃ¡t hÃ nh. PhiÃªn báº£n thá»­ nghiá»‡m Ä‘áº§u tiÃªn cá»§a XCM - v0 Ä‘Æ°á»£c phÃ¡t hÃ nh vÃ o thÃ¡ng 12 nÄƒm 2020, vÃ  bÃ¢y giá» vá»›i phiÃªn báº£n má»›i nháº¥t, XCM V3, cáº£i thiá»‡n báº£o máº­t vÃ  kháº£ nÄƒng tÆ°Æ¡ng tÃ¡c, tÄƒng cÆ°á»ng lá»£i tháº¿ cáº¡nh tranh, kháº³ng Ä‘á»‹nh vá»‹ tháº¿ cá»§a Polkadot so vá»›i cÃ¡c modular blockchain khÃ¡c trÃªn thá»‹ trÆ°á»ng. Tháº­m trÃ­ XCM V4 Ä‘Ã£ vÃ  Ä‘ang trong quÃ¡ trÃ¬nh nghiÃªn cá»©u vÃ  phÃ¡t triá»ƒn, há»©a háº¹n mang Ä‘áº¿n tráº£i nghiá»‡m linh hoáº¡t trong cÃ¡ch sá»­ dá»¥ng.

â„¹ï¸ Trong bÃ i viáº¿t nÃ y, cÃ¹ng tÃ¬m hiá»ƒu tá»•ng quan vá» XCM nhÃ©.


ï¼ƒ XCM lÃ  gÃ¬?

XCM (Cross-Chain Messaging) lÃ  má»™t thÃ nh pháº§n quan trá»ng cá»§a há»‡ sinh thÃ¡i Polkadot, cho phÃ©p giao tiáº¿p vÃ  tÆ°Æ¡ng tÃ¡c giá»¯a cÃ¡c parachain. XCM Ä‘Ã³ng vai trÃ² nhÆ° lÃ  táº­p há»£p cÃ¡c quy táº¯c thÃ´ng Ä‘iá»‡p hoáº·c "ngÃ´n ngá»¯ chung" Ä‘á»ƒ giao tiáº¿p giá»¯a cÃ¡c kÃªnh khÃ¡c nhau.

âš ï¸ LÆ°u Ã½: XCM chá»‰ lÃ  ngá»— ngá»¯ láº­p trÃ¬nh, giÃºp Ä‘á»‹nh dáº¡ng cÃ¡c tin nháº¯n, khÃ´ng pháº£i lÃ  giao thá»©c chá»‹u trÃ¡ch nhiá»‡m truyá»n táº£i.


A-4 cá»§a XCM ğŸ˜: 4 nguyÃªn táº¯c thiáº¿t káº¿ cá»‘t lÃµi cáº¥p cao mÃ  nÃ³ tuÃ¢n theo
- Asynchronous (Báº¥t Ä‘á»“ng bá»™): NgÆ°á»i gá»­i gá»­i tin nháº¯n mÃ  khÃ´ng cáº§n chá» Ä‘á»£i Ä‘á»ƒ tin nháº¯n Ä‘Æ°á»£c xá»­ lÃ½.
- Absolute (Tuyá»‡t Ä‘á»‘i): Äáº£m báº£o ráº±ng tin nháº¯n sáº½ Ä‘Æ°á»£c chuyá»ƒn vÃ  hiá»ƒu Ä‘Ãºng cÃ¡ch.
- Asymmetric (KhÃ´ng Ä‘á»‘i xá»©ng): KhÃ´ng cÃ³ xÃ¡c nháº­n ráº±ng tin nháº¯n Ä‘Ã£ Ä‘Æ°á»£c nháº­n.
- Agnostic (KhÃ´ng phá»¥ thuá»™c): Hoáº¡t Ä‘á»™ng mÃ  khÃ´ng cáº§n biáº¿t hoáº·c phá»¥ thuá»™c vÃ o há»‡ thá»‘ng mÃ  nÃ³ Ä‘ang gá»­i Ä‘áº¿n.

ï¼ƒ PhÆ°Æ¡ng thá»©c truyá»n táº£i cá»§a XCM

NhÆ° Ä‘Ã£ Ä‘á» cáº­p á»Ÿ trÃªn, XCM lÃ  ngÃ´n ngá»¯ Ä‘á»ƒ Ä‘á»‹nh dáº¡ng cÃ¡c tin nháº¯n, nÃ³ khÃ´ng pháº£i lÃ  má»™t giao thá»©c truyá»n táº£i. XCM dá»±a vÃ o cÃ¡c giao thá»©c truyá»n táº£i nhÆ° HRMP, XCMP vÃ  VMP Ä‘á»ƒ trao Ä‘á»•i cÃ¡c thÃ´ng Ä‘iá»‡p XCM tá»« há»‡ thá»‘ng nÃ y sang há»‡ thá»‘ng khÃ¡c, cÃ¹ng vá»›i cÃ¡c cáº§u ná»‘i bÃªn ngoÃ i.

CÃ³ 3 phÆ°Æ¡ng phÃ¡p chÃ­nh Ä‘á»ƒ truyá»n tin nháº¯n, má»™t trong sá»‘ Ä‘Ã³ Ä‘ang Ä‘Æ°á»£c phÃ¡t triá»ƒn:
â†”ï¸ XCMP (Cross-Consensus Message Passing)
â¡ï¸ Horizontal Relay-routed Message Passing (HRMP/XCMP-lite)
â¬†ï¸ VMP (Vertical Message Passing)


1. XCMP

âš ï¸ LÆ°u Ã½: XCMP hiá»‡n Ä‘ang trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn, vÃ  háº§u háº¿t cÃ¡c thÃ´ng Ä‘iá»‡p hiá»‡n táº¡i Ä‘Æ°á»£c truyá»n qua cÃ¡c kÃªnh HRMP.

XCMP cho phÃ©p giao tiáº¿p an toÃ n giá»¯a cÃ¡c parachain. NÃ³ cÃ³ hai hÃ¬nh thá»©c:

- Direct: Dá»¯ liá»‡u tin nháº¯n Ä‘Æ°á»£c gá»­i trá»±c tiáº¿p giá»¯a cÃ¡c parachain, giÃºp nÃ³ cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng cao vÃ  O(1) á»Ÿ phÃ­a Relay-chain.
- Relayed: Dá»¯ liá»‡u tin nháº¯n Ä‘Æ°á»£c Ä‘á»‹nh tuyáº¿n qua Relay-chain vÃ  dá»±a trÃªn VMP, dáº«n Ä‘áº¿n kháº£ nÄƒng má»Ÿ rá»™ng tháº¥p hÆ¡n. CÃ¡c parachain theo yÃªu cáº§u cÃ³ thá»ƒ gáº·p pháº£i sá»± cháº­m trá»… trong tin nháº¯n do hÃ ng Ä‘á»£i tÄƒng lÃªn.

2. HRMP/XCMP-lite

KhÃ¡c vá»›i VMP, lÃ  giao tiáº¿p giá»¯a má»™t parachain cá»¥ thá»ƒ vá»›i Relay-chain, HRMP lÃ  giao tiáº¿p giá»¯a cÃ¡c parachain vÃ  yÃªu cáº§u sá»± tham gia cá»§a Relay-chain trong quÃ¡ trÃ¬nh truyá»n táº£i tin nháº¯n.

(áº£nh 2)

3. VMP

Vertical Messaging Passing lÃ  giao tiáº¿p giá»¯a Relay Chain vÃ  cÃ¡c parachain. NÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c chia thÃ nh hai Ä‘á»‹nh dáº¡ng:

- **UMP (Upward Message Passing)**: Tin nháº¯n tá»« **parachain** Ä‘áº¿n **Relay Chain**.
- **DMP (Downward Message Passing)**: Tin nháº¯n tá»« **Relay Chain** Ä‘áº¿n **parachain**.

(áº£nh 3)

ï¼ƒ XCM Virtual Machine

Cá»‘t lÃµi cá»§a XCM lÃ  XCVM (Cross-Consensus Virtual Machine). ÄÃ¢y giá»‘ng nhÆ° má»™t mÃ¡y tÃ­nh Ä‘áº·c biá»‡t chá»‰ hiá»ƒu ngÃ´n ngá»¯ cá»§a XCM má»—i tin nháº¯n tÆ°Æ¡ng á»©ng vá»›i 1 XCVM. NÃ³ tuÃ¢n theo má»™t táº­p há»£p cÃ¡c quy táº¯c Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng cÃ¡c tin nháº¯n Ä‘Æ°á»£c hiá»ƒu chÃ­nh xÃ¡c.

CÃ¡ch hoáº¡t Ä‘á»™ng:

- **Tin nháº¯n**: Trong XCM, tin nháº¯n giá»‘ng nhÆ° cÃ¡c chÆ°Æ¡ng trÃ¬nh nhá» gá»“m cÃ¡c lá»‡nh. Nhá»¯ng lá»‡nh nÃ y cho XCVM biáº¿t pháº£i lÃ m gÃ¬, nhÆ° chuyá»ƒn tÃ i sáº£n tá»« blockchain nÃ y sang blockchain khÃ¡c.

- **Thá»±c thi**: XCVM cháº¡y cÃ¡c lá»‡nh nÃ y láº§n lÆ°á»£t. Náº¿u má»i thá»© diá»…n ra suÃ´n sáº», thÃ¬ sáº½ hoÃ n thÃ nh vÃ  káº¿t thÃºc. Náº¿u cÃ³ lá»—i xáº£y ra, nÃ³ dá»«ng láº¡i vÃ  tráº£ vá» lá»—i Ä‘á»ƒ dá»… dÃ ng debug.

- **TÃ¹y chá»‰nh**: Äiá»u tuyá»‡t vá»i vá» XCVM lÃ  nÃ³ Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ tÃ¹y chá»‰nh. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  developers cÃ³ thá»ƒ Ä‘iá»u chá»‰nh nÃ³ Ä‘á»ƒ phÃ¹ há»£p vá»›i nhu cáº§u cá»¥ thá»ƒ cá»§a blockchain.

ï¼ƒ QuÃ¡ trÃ¬nh "Ä‘i lÃªn" cá»§a XCM ğŸ’ª

Tá»« thÃ¡ng 12 nÄƒm 2020 Ä‘áº¿n 2022, XCM Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t vÃ  cáº£i tiáº¿n nhiá»u láº§n Ä‘á»ƒ tÄƒng tÃ­nh linh hoáº¡t, Ä‘a dáº¡ng hÃ³a vÃ  tÃ­nh hiá»‡u quáº£ cá»§a nÃ³. Äiá»u nÃ y cho tháº¥y ráº±ng Polkadot váº«n lÃ  má»™t cÃ´ng nghá»‡ tiÃªn tiáº¿n, váº«n luÃ´n Ä‘Æ°á»£c cáº­p nháº­t liÃªn tá»¥c.


ğŸ‘‰ XCM V3

XCM V3 Ä‘Ã£ cáº£i tiáº¿n giao thá»©c giÃºp phÃ¢n tÃ¡ch cÃ¡c á»©ng dá»¥ng qua cÃ¡c giao thá»©c phÃ¢n máº£nh khÃ¡c nhau, parachain vÃ  nhiá»u hÆ¡n ná»¯a.

- CÃ´ng cá»¥ PhÃ¢n tÃ¡ch Äa chuá»—i
- Chuyá»ƒn tÃ i sáº£n vÃ  NFT
- PhÆ°Æ¡ng thá»©c gá»­i an toÃ n

Má»¥c tiÃªu cá»§a XCM V3 lÃ  phÃ¢n tÃ¡ch Relay Chain cá»§a Polkadot thÃ nh "cÃ¡c chuá»—i há»‡ thá»‘ng chá»©c nÄƒng" â€” vá»›i cÃ¡c chá»©c nÄƒng chÃ­nh cá»§a Relay Chain lÃ  cung cáº¥p báº£o máº­t vÃ  tÆ°Æ¡ng tÃ¡c.

Äiá»ƒm chÃ­nh lÃ  táº¡o ra má»™t parachain chung cho má»—i chá»©c nÄƒng (quáº£n trá»‹, giao dá»‹ch cá»c, Ä‘áº¥u giÃ¡, tÃ i sáº£n). Äiá»u nÃ y lÃ  lá»£i tháº¿ cáº¡nh tranh cá»§a kiáº¿n trÃºc Polkadot so vá»›i cÃ¡c há»‡ sinh thÃ¡i khÃ¡c.

(áº£nh 4)

ğŸ‘‰ XCM V4 (Coming soon)

Theo Gavin Wood, táº¡i sá»± kiá»‡n Polkadot Decoded 2022, Ä‘Ã£ Ä‘Æ°á»£c ghi nháº­n ráº±ng XCM phiÃªn báº£n V4 Ä‘ang trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn vÃ  giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» nhÆ°:

- Chi phÃ­ linh hoáº¡t
- Äiá»u hÆ°á»›ng tin nháº¯n linh hoáº¡t
- Checkpoints
- Há»£p Ä‘á»“ng thÃ´ng minh
- ...

(áº£nh 5)

ï¼ƒ Káº¿t luáº­n

TÃ³m láº¡i, cÃ¡c tiáº¿n bá»™ trong Cross-Chain Messaging (XCM) cá»§a Polkadot Ä‘Ã£ Ä‘Ã¡ng ká»ƒ nÃ¢ng cao há»‡ sinh thÃ¡i nÃ y. Viá»‡c ra máº¯t XCM V3 Ä‘Ã£ cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ cáº£ tÃ­nh báº£o máº­t láº«n kháº£ nÄƒng tÆ°Æ¡ng tÃ¡c cá»§a Relay Chain cá»§a Polkadot.

XCM lÃ  má»™t yáº¿u tá»‘ quan trá»ng cho phÃ©p tÆ°Æ¡ng tÃ¡c phi táº­p trung giá»¯a nhiá»u parachain, há»— trá»£ giao tiáº¿p chuá»—i chÃ©o, quáº£n trá»‹ vÃ  chuyá»ƒn Ä‘á»•i tÃ i sáº£n. Viá»‡c phÃ¡t triá»ƒn liÃªn tá»¥c cá»§a XCM nháº¥n máº¡nh cam káº¿t cá»§a cá»™ng Ä‘á»“ng Polkadot trong viá»‡c duy trÃ¬ vá»‹ tháº¿ hÃ ng Ä‘áº§u vá» tiáº¿n bá»™ cÃ´ng nghá»‡ trong lÄ©nh vá»±c tiá»n Ä‘iá»‡n tá»­.

Tuy nhiÃªn, trong khi viá»‡c chuyá»ƒn tÃ i sáº£n vÃ  truyá»n táº£i tin nháº¯n trong XCM cÃ²n háº¡n cháº¿ vÃ  cáº§n Ä‘áº¿n bÃªn thá»© ba, cÃ´ng cá»¥ má»›i Ä‘Æ°á»£c gá»i lÃ  SPREE, sáº½ Ä‘Æ°á»£c khÃ¡m phÃ¡ cÃ¡c trong bÃ i post tiáº¿p theo.


## Reference

- [Polkadot Wiki - XCM](https://wiki.polkadot.network/docs/learn-xcm-index)
- [XCM v3 | Polkadot Deep dive](https://www.youtube.com/watch?v=MMIPNR3SuB4)
- [Gavin Wood, Polkadot founder: XCM v3 | Polkadot Decoded 2022](https://youtu.be/K2c6xrCoQOU?t=1920)


## Read more

- [How XCM v3 enhances Bifrost protocol](https://docs.bifrost.io/builders/liquid-staking-slp/xcm-v3-in-bifrost)
- [Moonbeam - Remote EVM calls through XCM](https://docs.moonbeam.network/builders/interoperability/xcm/remote-execution/remote-evm-calls/)
- [PhÆ°Æ¡ng Nguyá»…n - POLKADOT 2.0: TÆ¯Æ NG LAI Cá»¦A CÃC á»¨NG Dá»¤NG PHI Táº¬P TRUNG](https://www.facebook.com/groups/1202788154012237/posts/1303786630579055/)



